---
title: 旧バージョンの Unity プロジェクトのアップグレード
description: 最新バージョンの Unity にコンテンツを更新する方法について説明します。
ms.date: 10/19/2021
ms.topic: article
keywords: キット, ワールド, unity, 更新, シェーダー, アップローダー, トラブルシューティング
ms.openlocfilehash: 06af70164e5bf870a10bf1ee9e949e09dfa69fd2
ms.sourcegitcommit: 8c58f9f9ad1a3f9534141dee2c78e32792d0db7a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/25/2021
ms.locfileid: "130302414"
---
<a name="upgrading-old-unity-projects"></a>旧バージョンの Unity プロジェクトのアップグレード
=============================

この数年で、ユーザーがコンテンツを変更することを必要とする、いくつかの不定期なアップグレードが行われています。 過去にアップロードしたテンプレートまたはキットには、最新バージョンの Altworkplace Evr ではアクセスできないことがわかった場合は、このガイドに従ってコンテンツを再起動してください。

> [!NOTE]
> このガイドの手順を実行する前に、アップグレードがスムーズに行われない場合に備えて、プロジェクトの完全バックアップを作成する必要があります。 最も簡単な方法は、プロジェクトフォルダー全体の2番目のコピーを作成することです。 より高度なソリューションを使用する場合は、Git や GitHub のようなバージョン管理システムを使用することを検討してください。

<a name="overview"></a>概要
---------

このドキュメントの執筆時点では、現在のバージョンの Altworkplace Evr では次の構成が使用されています。

* ゲームエンジン: Unity 2020.3.18 f1 (使用可能: Unity 2020.3.9 f1)
* アップロードツール: アップローダー2.2
* レンダリング: ユニバーサルレンダーパイプライン (URP)
* ステレオモード: Single-Pass インスタンス化 (SPI)、または Quest での Multiview

プロジェクト Unity のバージョンが2020.3 より前の場合は、これらの更新プログラムをすべて一度に実行しなければならないことがあります。そのため、最初からこのガイドに従ってください。 Unity 2020.3 を既に使用していて、アップローダー0.9 を使用している場合は、手順 6. から開始します。

1. **プロジェクトのバックアップ** -プロジェクトディレクトリ全体のコピーを作成し、安全な場所に配置します。 このアップグレードは破壊的なアップグレードであるため、完了後に元のプロジェクトファイルが失われます。
    このアップグレード中に問題が発生した場合は、プロジェクトのクリーンコピーが必要になります。

2. **OLD アップローダーを削除** する-プロジェクトが altアップローダー0.8 以前を使用している場合は、この手順を実行します。 Unity を閉じた状態で、次のファイル/フォルダーを削除し、対応するメタファイルを削除します。 ファイルまたはフォルダーが存在しない場合は、スキップしてください。

    * アセット/Altspace
    * アセット/プラグイン
    * Assets/Prefabs/test-フォルダー
    * Assets/Prefabs/Readme.txt
    * Assets/Resources/bg .jpeg
    * Assets/Resources/bg2
    * 資産/リソース/logo.png
    * Assets/Resources/UserPreferences。 asset
    * Assets/DFloor_v004 fbx

3. **処理済みの資産を削除** する-新しい Unity バージョンにアップグレードする場合は、この手順を実行します。 Unity を閉じた状態で、ライブラリフォルダーをプロジェクトから削除します。 これは、資産フォルダーのコンテンツから自動的に生成されるエンジン固有の資産およびファイルを含む Unity システムフォルダーです (特に)。

4. [**エンジンバージョンのダウンロード**-新しい Unity バージョンにアップグレードする場合は、この手順を実行します。 Unity ハブを開き、ダウンロードアーカイブ ([エンジンインストールへのリンク](unityhub://2020.3.18f1/a7d1c678663c)) から unity 2020.3.18 f1 をインストールします。
    * Windows PC でビルドする場合は、Android と Mac のビルドサポートのチェックボックスをオンにします。
    * Mac でビルドする場合は、[Android および Windows ビルドサポート] のチェックボックスをオンにします。

5. [**プロジェクトのアップグレード**]: unity 2020.3.18 f1 で、クリーンされたプロジェクトを開き、unity がプロジェクトをアップグレードできるようにします。
    これには少し時間がかかります。

6. **アップローダーをダウンロード** して [、アップローダーの最新バージョンをダウンロード](https://aka.ms/AvrUrpUploader)し、プロジェクトの [パッケージ] フォルダーに保存します。 このファイルのファイル拡張子は "tgz" である必要があります。
    > [!NOTE]
    > ダウンロードに Safari ブラウザーを使用している場合は、Unity が使用できない "tar" ファイルに自動的に抽出されます。 別のブラウザーを使用してダウンロードするか、"gzip" システムユーティリティを使用してもう一度圧縮することができます。
    
7. **アップローダーをインストールする** -Unity エディターのパッケージマネージャー内からアップローダーをインストールします。
    1. Unity パッケージマネージャーウィンドウを開きます: Windows > パッケージマネージャー
    2. ウィンドウの左上にある [+] アイコンをクリックし、[tar からパッケージを追加] を選択します。
    3. 最後の手順でダウンロードした tgz ファイルを選択します。
    4. Unity によってパッケージがアンパックされるまで待ちます。

8. **アップローダーを開き** ます。インストールが成功した場合は、上部のバーに "Altspace evr" メニューが表示されます。
    このメニューには、キットとテンプレート用の別のウィンドウが含まれています。 プロジェクトに最も適したものを開きます。
    ウィンドウを初めて開いたときに、プロジェクト設定が Altspace ゲームクライアントに一致するように構成されます。これは、ユニバーサルレンダリングパイプラインの有効化と Single-Pass のインスタンス化です。

9. **シェーダーの修正** -最初のセットアップの実行中に、powershell ウィンドウが一時的に表示される場合があります。
    カスタムまたはダウンロードされたシェーダーの一部をアップグレードするように求められる場合があります。 プロンプトを承認すると、powershell スクリプトによってシェーダーのアップグレードが自動的に試行されますが、成功の確率は低くなります。 URP でシェーダーが正常に機能しているかどうかを手動で確認する必要があります。

10. **マテリアルの修正** -アップグレードプロセス中に、一部またはすべての素材がピンク/マゼンタになる場合があります。 これは、そのマテリアルによって使用されるシェーダーにエラーがあることを示します。 Unity の組み込みシェーダーを使用した場合は、通常、メニューから URP 互換のシェーダーに自動的に移行できます >。これを行うには、> ユニバーサルレンダリングパイプライン > Project マテリアルを UniversalRP マテリアルにアップグレードします。

11. **ビルドとアップロード** -この時点で、プロジェクトは完全にアップグレードする必要があります。 [はじめに](world-building-toolkit-getting-started.md)ガイドに記載されている手順に従って、キット/テンプレートをビルドしてアップロードします。

<a name="troubleshooting-tips"></a>トラブルシューティングのヒント
---------------------

1. VR モードでコンテンツが1つ目に表示されるだけであることが判明した場合は、使用するカスタムシェーダーで SPI レンダリングがサポートされていない可能性があります。 別のシェーダーを選択するか、 [Unity の SPI アップグレードガイド](https://docs.unity3d.com/Manual/SinglePassInstancing.html) に従ってシェーダーを手動で編集し、サポートを追加する必要があります。

2. 一部のコンテンツがゲーム中でピンクまたはマゼンタであることがわかった場合、または完全に非表示になっている場合は、シェーダーが URP と互換性がないことが原因である可能性があります。 シェーダーを置き換えるか、手動でアップグレードする必要があります。